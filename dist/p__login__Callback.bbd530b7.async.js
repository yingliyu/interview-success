(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"2hfb":function(e,n,t){},LrNs:function(e,n,t){"use strict";t.r(n);var a=t("fWQN"),r=t("mtLc"),i=t("yKVA"),o=t("879j"),s=t("q1tI"),c=t.n(s),u=t("9kvl"),l=t("wl5m"),d=t("3Rfw"),p=t("lS5I"),f=t("eAVH"),h=t("bIAK"),v=(t("2hfb"),t("lGLc")),g=t("nKUr"),m=function(e){Object(i["a"])(t,e);var n=Object(o["a"])(t);function t(e){var r;return Object(a["a"])(this,t),r=n.call(this,e),r.userManager=void 0,r.cssStyle=void 0,r.loginSuccess=function(e){p["a"].setAuthCache(e);var n=new d["WebStorageStateStore"]({});n.get("return_url").then((function(e){var t=decodeURIComponent(e);n.remove("return_url"),null!==t&&""!==t&&"null"!==t||(t="/api/apilist"),u["c"].push(t)})).catch((function(){return u["c"].push("/api/apilist")}))},r.setUser=function(e){var n=(e.profile.role||"").split(","),t=[];n.map((function(e){return t.push({id:e,key:e,name:e})}));var a={id:e.profile.sub,name:e.profile.nickname||"",avatar:e.profile.picture||"",isLogin:!0,isNew:!1,isPayed:!1,roles:t,company:e.profile.company||""};a.avatar&&-1===a.avatar.indexOf("://")&&(a.avatar=f["g"].downloadImgUrl+a.avatar);var r={token:e.access_token,expire_in:1e3*e.expires_at},i={token:r,user:a};v["a"].delCookie("CNABS_PassCode"),v["a"].addCookie("CNABS_PassCode",e.profile.name||"","","/"),p["a"].setAuthCache(i),u["c"].push("/api/apilist")},r.userManager=new d["UserManager"](l["a"]),r.cssStyle={textAlign:"center"},r}return Object(r["a"])(t,[{key:"componentDidMount",value:function(){var e=this;this.userManager.events.addUserLoaded((function(n){e.setUser(n)}));var n=window.location.href.replace("/user/callback?","/#");n.indexOf("id_token")>-1?this.userManager.signinRedirectCallback(n).catch((function(){return u["c"].push("/user/login")})):this.userManager.getUser().then((function(n){return e.setUser(n)})).catch((function(){return u["c"].push("/user/login")}))}},{key:"render",value:function(){return Object(g["jsxs"])("div",{className:"abs-after-login-loading",children:[Object(g["jsx"])(h["a"],{}),Object(g["jsx"])("span",{children:"\u6b63\u5728\u52a0\u8f7d"})]})}}]),t}(c.a.Component);n["default"]=m},wl5m:function(e,n,t){"use strict";function a(){var e=window.location.origin+"/user/callback?";return e}var r={authority:"http://192.168.15.23:5001",client_id:"cnabs_oaclient",client_secret:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",scope:"openid profile cnabs quotes organization identity identity_admin apicenter apicenter_admin projects_admin products_admin assets_admin opendata_admin",redirect_uri:a(),response_type:"id_token token",clockSkew:86400,monitorSession:!1};n["a"]=r}}]);