(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{CyeU:function(e,a,t){},Vwni:function(e,a,t){},WM5l:function(e,a,t){"use strict";t.r(a);var n=t("tJVT"),r=t("q1tI"),i=(t("CyeU"),t("9kvl")),c=t("4+0c"),s=t("k1fw"),l=t("PpiC"),d=t("9og8"),u=t("WmNS"),o=t.n(u),j=(t("fuO/"),t("Qiat")),b=t("Ytw1"),p=t("Dp36"),m=function(){var e=[{title:"\u5e8f\u53f7",dataIndex:"id",valueType:"textarea",hideInSearch:!0,fixed:!0,width:60,render:function(e,a,t){return t+1}},{title:"\u59d3\u540d",dataIndex:"user_name_cn",valueType:"textarea",hideInSearch:!0,fixed:!0,width:100},{title:"\u516c\u53f8",dataIndex:"company",valueType:"textarea",hideInSearch:!0,fixed:!0,width:150},{title:"\u624b\u673a\u53f7",dataIndex:"cellphone",valueType:"textarea",hideInSearch:!0},{title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"last_modify_time",valueType:"textarea",render:function(e){return b["a"].formatTime(e)}},{title:"\u6709\u6548\u671f",dataIndex:"expired_date",valueType:"textarea",hideInSearch:!0,ellipsis:!0,render:function(e,a){var t=a.start_date,n=a.expired_date;return"".concat(b["a"].formatDate(t)," ~ ").concat(b["a"].formatDate(n))}},{title:"\u5269\u4f59\u6b21\u6570/\u5929\u6570",valueType:"textarea",hideInSearch:!0,render:function(e,a){return Object(p["c"])(a)}},{title:"\u72b6\u6001",dataIndex:"is_trial",hideInSearch:!0,filters:[],valueEnum:{true:{text:"\u8bd5\u7528",status:"Warning"},false:{text:"\u5df2\u8d2d",status:"Success"}}},{title:"\u671f\u9650",dataIndex:"is_expired",hideInSearch:!0,filters:[],valueEnum:{false:{text:"\u4f7f\u7528\u4e2d",status:"Success"},true:{text:"\u5230\u671f",status:"Warning"}}}];return e},h=m,f=t("nKUr"),x=function(e){var a=Object(r["useRef"])(),t=function(){var a=Object(d["a"])(o.a.mark((function a(){var t,n,r,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.userLicense,n=[],r=t.api_license,i=Object(l["a"])(t,["api_license"]),r&&r.length>0&&(n=r.map((function(e){return Object(s["a"])(Object(s["a"])({},e),i)}))),a.abrupt("return",{data:n});case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),n=e.userLicense,i=void 0===n?{}:n,u=i||{},b=u.api_license;return b&&0!==b.length?Object(f["jsx"])(c["w"],{title:"\u76f8\u5173\u8bb0\u5f55",children:Object(f["jsx"])(j["a"],{search:!1,actionRef:a,rowKey:"id",request:t,pagination:!1,toolBarRender:!1,tableAlertRender:!1,columns:h(),scroll:{x:1300}})}):null},O=x,v=(t("Vwni"),t("pn+7")),y=[{value:0,title:"\u8bf7\u9009\u62e9\u8d26\u53f7\u5c5e\u6027"},{value:1,title:"\u8bd5\u7528\u8d26\u53f7"},{value:2,title:"\u6b63\u5f0f\u8d26\u53f7"}],_=[{value:!1,title:"\u5f00\u542f"},{value:!0,title:"\u7981\u7528"}],g=function(e){var a=e||{},t=a.params,n=void 0===t?{}:t,r=n||{},i=r.id,c=void 0===i?0:i,l=r.user_id,d=void 0===l?0:l,u=r.api_id,o=r.api_name,j=void 0===o?"":o,m=r.category,h=void 0===m?"":m,f=r.user_name,x=void 0===f?"":f,O=r.cellphone,v=void 0===O?"":O,y=r.company,_=void 0===y?"":y,g=r.user_name_cn,w=void 0===g?"":g,k=r.is_trial,V=void 0===k?"true":k,N=r.start_date,I=void 0===N?b["a"].getNow():N,F=r.expired_date,A=void 0===F?b["a"].getNow():F,P=r.limits,L=void 0===P?[]:P,S=r.is_locked,R=void 0===S?"false":S,U=""===x,T=V?1:2,C=U?0:T;return Object(s["a"])({id:U?0:Number(c),is_trial:C,rangeValue:U?b["a"].getNowArray():[b["a"].formatDate(I),b["a"].formatDate(A)],is_locked:"true"===R,user_name:x,api_id:Number(u),api_name:j,category:h,user_name_cn:w,company:_,cellphone:v,user_id:d,limits:L},Object(p["a"])(L))},w={init:"init",name:"name",account:"account",loadAgain:"load-again",changeRange:"change-range"},k=function(e,a){var t=a.type,n=a.value,r=a.form,i=n||{},c=i.id,l=void 0===c?0:c,d=i.user_id,u=void 0===d?0:d,o=i.user_name_cn,j=void 0===o?"":o,m=i.company,h=void 0===m?"":m,f=i.cellphone,x=void 0===f?"":f,O=i.is_trial,_=void 0===O||O,g=i.is_locked,k=void 0!==g&&g,V=i.limits,N=void 0===V?[]:V,I=i.isAdd,F=i.start_date,A=i.expired_date;switch(t){case w.init:return v["a"].defineProperty(e,"user_id",u),r.setFieldsValue({user_name_cn:j}),r.setFieldsValue({user_name_cn:j}),r.setFieldsValue({company:h}),r.setFieldsValue({cellphone:x}),Object(s["a"])({},e);case w.name:return v["a"].defineProperty(e,"user_name",n),Object(s["a"])({},e);case w.account:return n===y[1].value?v["a"].defineProperty(e,"rangeValue",b["a"].getNowArray(30)):n===y[2].value?v["a"].defineProperty(e,"rangeValue",b["a"].getNowArray(1,"year")):v["a"].defineProperty(e,"rangeValue",b["a"].getNowArray()),Object(s["a"])({},e);case w.changeRange:return v["a"].defineProperty(e,"rangeValue",n),Object(s["a"])({},e);case w.loadAgain:var P=Object(p["a"])(N),L=P.all,S=P.day,R=P.week,U=P.month;return I||(v["a"].defineProperty(e,"id",l),v["a"].defineProperty(e,"limits",N)),v["a"].defineProperty(e,"user_id",u),v["a"].defineProperty(e,"rangeValue",I?b["a"].getNowArray():[b["a"].formatDate(F),b["a"].formatDate(A)]),r.setFieldsValue({is_trial:_?1:2}),r.setFieldsValue({all:L}),r.setFieldsValue({day:S}),r.setFieldsValue({week:R}),r.setFieldsValue({month:U}),r.setFieldsValue({is_locked:k}),Object(s["a"])({},e);default:throw new Error}},V=function(e){var a=e.params,t=void 0===a?{}:a,i=e.userLicense,l=void 0===i?{}:i,d=e.form,u=e.dispatch,o=t||{},j=o.user_name,b=void 0===j?"":j,m=o.api_id,h=""===b,x=Object(r["useReducer"])(k,g(e)),O=Object(n["a"])(x,2),v=O[0],V=O[1],N=v||{},I=N.user_name,F=N.rangeValue;Object(r["useEffect"])((function(){u({type:"apiUser/getUserLicense",payload:{id:m,userName:I}}).then((function(e){h&&V({type:w.init,value:e,form:d})}))}),[I]),Object(r["useEffect"])((function(){var e=l.api_license;e&&e.length>0&&V({type:w.loadAgain,value:Object(s["a"])(Object(s["a"])({},e[0]),{},{isAdd:h}),form:d})}),h?[]:[l]),Object(r["useEffect"])((function(){return function(){d&&d.resetFields(),u({type:"apiUser/getEmptyUserLicense",payload:{}})}}),[]);var A=function(e){var a=l||{},t=a.cellphone,n=void 0===t?"":t,r=e||{},i=r.user_name,s=void 0===i?"":i,d=r.is_trial,o=void 0===d?0:d;s?n?0!==o?u({type:"apiUser/saveUserLicense",payload:{result:Object(p["d"])(v,e),isAdd:h}}):c["s"].warning("\u8bf7\u9009\u62e9\u8d26\u53f7\u5c5e\u6027"):c["s"].warning("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7528\u6237\u540d"):c["s"].warning("\u8bf7\u8f93\u5165\u7528\u6237\u540d")},P=function(e){return c["s"].error(e)};return Object(f["jsx"])(c["w"],{title:"\u57fa\u672c\u4fe1\u606f",children:Object(f["jsxs"])(c["h"],{form:d,className:"user-info",onFinish:A,onFinishFailed:P,initialValues:Object(s["a"])({},v),children:[Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"api_name",label:"\u63a5\u53e3\u540d\u79f0",children:Object(f["jsx"])(c["n"],{disabled:!0})}),Object(f["jsx"])(c["k"],{name:"category",label:"\u63a5\u53e3\u5206\u7c7b",children:Object(f["jsx"])(c["n"],{disabled:!0})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"user_name",label:"\u7528\u6237\u540d",children:Object(f["jsx"])(c["n"],{disabled:!h,placeholder:I?"":"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onBlur:function(e){return V({type:w.name,value:e})},onPressEnter:function(e){return V({type:w.name,value:e})}})}),Object(f["jsx"])(c["k"],{name:"user_name_cn",label:"\u59d3\u540d",children:Object(f["jsx"])(c["n"],{disabled:!0})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"company",label:"\u516c\u53f8\u540d",children:Object(f["jsx"])(c["n"],{disabled:!0})}),Object(f["jsx"])(c["k"],{name:"cellphone",label:"\u624b\u673a\u53f7",children:Object(f["jsx"])(c["n"],{disabled:!0})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"is_trial",label:"\u8d26\u53f7\u5c5e\u6027",children:Object(f["jsx"])(c["A"],{placeholder:"\u8bf7\u9009\u62e9\u8d26\u53f7\u5c5e\u6027",onChange:function(e){return V({type:w.account,value:e})},options:y})}),Object(f["jsx"])(c["k"],{name:"date",label:"\u6709\u6548\u671f",children:Object(f["jsx"])(c["e"],{isRangePicker:!0,rangeValue:F,onChangeRange:function(e){return V({type:w.changeRange,value:e})}})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"all",label:"\u8c03\u7528\u603b\u6b21\u6570",children:Object(f["jsx"])(c["n"],{placeholder:"\u8bf7\u8f93\u5165\u8c03\u7528\u603b\u6b21\u6570",isNumber:!0})}),Object(f["jsx"])(c["k"],{name:"day",label:"\u6bcf\u5929\u8c03\u7528\u6b21\u6570",children:Object(f["jsx"])(c["n"],{placeholder:"\u8bf7\u8f93\u5165\u6bcf\u5929\u8c03\u7528\u6b21\u6570",isNumber:!0})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"week",label:"\u6bcf\u5468\u8c03\u7528\u6b21\u6570",children:Object(f["jsx"])(c["n"],{placeholder:"\u8bf7\u8f93\u5165\u6bcf\u5468\u8c03\u7528\u6b21\u6570",isNumber:!0})}),Object(f["jsx"])(c["k"],{name:"month",label:"\u6bcf\u6708\u8c03\u7528\u6b21\u6570",children:Object(f["jsx"])(c["n"],{placeholder:"\u8bf7\u8f93\u5165\u6bcf\u6708\u8c03\u7528\u6b21\u6570",isNumber:!0})})]}),Object(f["jsxs"])(c["y"],{children:[Object(f["jsx"])(c["k"],{name:"is_locked",label:"\u6388\u6743\u72b6\u6001",children:Object(f["jsx"])(c["A"],{placeholder:"\u8bf7\u9009\u62e9\u6388\u6743\u72b6\u6001",options:_})}),Object(f["jsx"])(c["c"],{span:12})]})]})})},N=Object(r["memo"])(V),I=function(e){var a=e.dispatch,t=e.userLicense,r=e.history,i=c["h"].useForm(),s=Object(n["a"])(i,1),l=s[0],d=function(){return l.submit()},u=function(){return r.goBack()},o=function(){return Object(f["jsxs"])(c["y"],{className:"user-setting-buttons",children:[Object(f["jsx"])(c["b"],{type:"primary",block:!0,onClick:d,children:"\u4fdd\u5b58"}),Object(f["jsx"])(c["b"],{type:"primary",block:!0,onClick:u,children:"\u53d6\u6d88"})]})},j=e.location.state.params;return Object(f["jsx"])(c["v"],{className:"user-setting",children:Object(f["jsxs"])(c["p"].Content,{children:[Object(f["jsx"])(N,{form:l,params:j,userLicense:t,dispatch:a}),Object(f["jsx"])(O,{userLicense:t}),o()]})})},F=function(e){var a=e.apiUser,t=a.userLicense;return{userLicense:t}};a["default"]=Object(i["a"])(F)(I)},"fuO/":function(e,a,t){}}]);